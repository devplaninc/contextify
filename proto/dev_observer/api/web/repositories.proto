syntax = "proto3";

package dev_observer.api.web.repositories;

import "dev_observer/api/types/repo.proto";

option go_package = "github.com/devplaninc/contextify/clients/go/contextify/service";

message ListRepositoriesResponse {
  repeated dev_observer.api.types.repo.GitRepository repos = 1;
}

message AddRepositoryRequest {
  string url = 1;
  dev_observer.api.types.repo.GitProvider provider = 2;
}

message AddRepositoryResponse {
  dev_observer.api.types.repo.GitRepository repo = 1;
}

message RescanRepositoryRequest{
  optional bool research = 1;
  optional bool skip_summary = 2;
  optional bool force_research = 3;
}

message RescanRepositoryResponse{}

message GetRepositoryResponse{
  dev_observer.api.types.repo.GitRepository repo = 1;
}

message DeleteRepositoryResponse{
  repeated dev_observer.api.types.repo.GitRepository repos = 1;
}

message FilterRepositoriesRequest {
  dev_observer.api.types.repo.ReposFilter filter = 1;
}

message FilterRepositoriesResponse {
  repeated dev_observer.api.types.repo.GitRepository repos = 1;
}

message RescanAnalysisSummaryRequest {
  bool force = 1;
}

message RescanAnalysisSummaryResponse {
}

message GetAuthenticatedRepoRequest {
  string repo_full_name = 1;
  api.types.repo.GitProvider provider = 2;
}

message GetAuthenticatedRepoResponse {
  string authenticated_url = 1;
}

